<script>
  async function getStockPrice() {
    const symbol = document.getElementById("symbol").value.toUpperCase().trim();
    const resultDiv = document.getElementById("result");
    if (!symbol) return resultDiv.textContent = "Veuillez entrer un symbole boursier.";

    resultDiv.textContent = "Chargement...";

    try {
      const apiKey = d47squhr01qk80bicmq0d47squhr01qk80bicmqg; // <-- Mets ta clé Finnhub ici
      const url = `https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${apiKey}`;
      const response = await fetch(url);
      const data = await response.json();

      if (!data.c) {
        resultDiv.textContent = "Aucune donnée trouvée pour ce symbole.";
        return;
      }

      resultDiv.innerHTML = `
        <strong>${symbol}</strong><br>
        Prix actuel : <strong>${data.c}</strong><br>
        Ouverture : ${data.o}<br>
        Haut : ${data.h}<br>
        Bas : ${data.l}<br>
        Variation : ${(data.d ?? 0).toFixed(2)} (${(data.dp ?? 0).toFixed(2)}%)
      `;
    } catch (error) {
      console.error(error);
      resultDiv.textContent = "Erreur lors de la récupération des données.";
    }
  }
</script>
