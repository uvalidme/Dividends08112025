<script>
  async function getStockPrice() {
    const symbol = document.getElementById("symbol").value.toUpperCase().trim();
    const resultDiv = document.getElementById("result");
    if (!symbol) {
      resultDiv.textContent = "Veuillez entrer un symbole boursier.";
      return;
    }

    resultDiv.textContent = "Chargement...";

    try {
      const apiKey = "d47squhr01qk80bicmq0d47squhr01qk80bicmqg"; // âœ… ta clÃ© API entre guillemets
      const url = `https://finnhub.io/api/v1/quote?symbol=${symbol}&token=${apiKey}`;
      console.log("URL de requÃªte :", url); // ðŸ‘€ utile pour le debug
      const response = await fetch(url);
      
      if (!response.ok) {
        throw new Error(`Erreur HTTP ${response.status}`);
      }

      const data = await response.json();
      console.log("RÃ©ponse API :", data); // ðŸ‘€ on voit ce que lâ€™API renvoie dans la console

      if (!data.c) {
        resultDiv.textContent = "Aucune donnÃ©e trouvÃ©e pour ce symbole.";
        return;
      }

      resultDiv.innerHTML = `
        <strong>${symbol}</strong><br>
        Prix actuel : <strong>${data.c}</strong><br>
        Ouverture : ${data.o}<br>
        Haut : ${data.h}<br>
        Bas : ${data.l}<br>
        Variation : ${(data.d ?? 0).toFixed(2)} (${(data.dp ?? 0).toFixed(2)}%)
      `;
    } catch (error) {
      console.error("Erreur :", error);
      resultDiv.textContent = "Erreur lors de la rÃ©cupÃ©ration des donnÃ©es.";
    }
  }
</script>
